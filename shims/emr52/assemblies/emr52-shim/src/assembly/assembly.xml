<assembly>
  <id>plugin</id>
  <baseDirectory>emr52</baseDirectory>
  <formats>
    <format>zip</format>
  </formats>
  <fileSets>
    <fileSet>
      <directory>${basedir}/src/main/resources</directory>
      <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${oss.license.directory}</directory>
      <outputDirectory>/</outputDirectory>
    </fileSet>
  </fileSets>
  <dependencySets>
    <dependencySet>
      <outputDirectory>/</outputDirectory>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>org.pentaho:pentaho-hadoop-shims-emr52</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>external-libs</outputDirectory>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>org.pentaho:pentaho-hadoop-shims-hbase-comparators</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>pentaho:hadoop2-windows-patch</include>
        <include>org.apache.hive:hive-exec</include>
        <include>org.apache.hive:hive-jdbc</include>
        <include>org.apache.hive:hive-metastore</include>
        <include>org.apache.hive:hive-service</include>
        <include>org.apache.thrift:libfb303</include>
        <include>org.apache.thrift:libthrift</include>
        <include>org.apache.oozie:oozie-client</include>
        <include>org.apache.oozie:oozie-core</include>
        <include>pentaho:pentaho-hdfs-vfs</include>
        <include>org.apache.pig:pig</include>
        <include>org.apache.sqoop:sqoop</include>
      </includes>
      <excludes>
        <exclude>*:tests:*</exclude>
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib/client</outputDirectory>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>dk.brics.automaton:automaton</include>
        <include>com.amazonaws:aws-java-sdk-core</include>
        <include>com.amazonaws:aws-java-sdk-dynamodb</include>
        <include>com.amazonaws:aws-java-sdk-emr</include>
        <include>com.amazonaws:aws-java-sdk-s3</include>
        <include>org.apache.commons:commons-exec</include>
        <include>commons-lang:commons-lang</include>
        <include>org.apache.hadoop:hadoop-auth</include>
        <include>org.apache.hadoop:hadoop-common</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-jobclient</include>
        <include>org.apache.httpcomponents:httpclient</include>
        <include>org.apache.httpcomponents:httpcore</include>
        <include>com.fasterxml.jackson.core:jackson-annotations</include>
        <include>com.fasterxml.jackson.core:jackson-core</include>
        <include>com.fasterxml.jackson.core:jackson-databind</include>
        <include>joda-time:joda-time</include>
        <include>org.jscience:jscience</include>
        <include>log4j:log4j</include>
        <include>org.apache.zookeeper:zookeeper</include>
      </includes>
      <excludes>
        <exclude>*:tests:*</exclude>
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib/client</outputDirectory>
      <includes>
        <!-- Parent MVN Dependencies -->
        <include>javax.activation:activation</include>
        <include>aopalliance:aopalliance</include>
        <include>org.apache.avro:avro</include>
        <include>com.amazonaws:aws-java-sdk</include>
        <include>commons-cli:commons-cli</include>
        <include>org.apache.commons:commons-compress</include>
        <include>commons-daemon:commons-daemon</include>
        <include>commons-httpclient:commons-httpclient</include>
        <include>com.google.inject:guice</include>
        <include>com.google.inject.extensions:guice-servlet</include>
        <include>org.apache.hadoop:hadoop-annotations</include>
        <include>org.apache.hadoop:hadoop-hdfs</include>
        <include>org.apache.hadoop:hadoop-yarn-api</include>
        <include>org.apache.hadoop:hadoop-yarn-client</include>
        <include>org.apache.hadoop:hadoop-yarn-common</include>
        <include>org.apache.hadoop:hadoop-yarn-server-common</include>
        <include>org.apache.hadoop:hadoop-yarn-server-nodemanager</include>
        <include>org.apache.hadoop:hadoop-yarn-server-web-proxy</include>
        <include>org.apache.htrace:htrace-core</include>
        <include>org.codehaus.jackson:jackson-jaxrs</include>
        <include>org.codehaus.jackson:jackson-xc</include>
        <include>javax.inject:javax.inject</include>
        <include>javax.xml.bind:jaxb-api</include>
        <include>com.sun.xml.bind:jaxb-impl</include>
        <include>com.sun.jersey:jersey-client</include>
        <include>com.sun.jersey:jersey-core</include>
        <include>com.sun.jersey.contribs:jersey-guice</include>
        <include>com.sun.jersey:jersey-json</include>
        <include>com.sun.jersey:jersey-server</include>
        <include>org.codehaus.jettison:jettison</include>
        <include>org.mortbay.jetty:jetty</include>
        <include>org.mortbay.jetty:jetty-util</include>
        <include>org.fusesource.leveldbjni:leveldbjni-all</include>
        <include>io.netty:netty-all</include>
        <include>com.thoughtworks.paranamer:paranamer</include>
        <include>com.google.protobuf:protobuf-java</include>
        <include>javax.servlet:servlet-api</include>
        <include>org.slf4j:slf4j-api</include>
        <include>org.slf4j:slf4j-log4j12</include>
        <include>org.xerial.snappy:snappy-java</include>
        <include>xerces:xercesImpl</include>
        <include>xmlenc:xmlenc</include>
        <!-- Transitive MVN Dependencies -->
        <include>org.apache.hadoop:hadoop-aws</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-app</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-common</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-core</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-hs</include>
        <include>org.apache.hadoop:hadoop-mapreduce-client-shuffle</include>
        <!-- Transitive ANT Dependencies -->
        <include>org.apache.directory.server:apacheds-i18n</include>
        <include>org.apache.directory.server:apacheds-kerberos-codec</include>
        <include>org.apache.directory.api:api-asn1-api</include>
        <include>org.apache.directory.api:api-util</include>
        <include>asm:asm</include>
        <include>org.sonatype.sisu.inject:cglib</include>
        <include>commons-beanutils:commons-beanutils</include>
        <include>commons-beanutils:commons-beanutils-core</include>
        <include>commons-codec:commons-codec</include>
        <include>commons-configuration:commons-configuration</include>
        <include>commons-digester:commons-digester</include>
        <include>commons-io:commons-io</include>
        <include>commons-logging:commons-logging</include>
        <include>org.apache.commons:commons-math3</include>
        <include>commons-net:commons-net</include>
        <include>org.apache.curator:curator-client</include>
        <include>org.apache.curator:curator-framework</include>
        <include>org.apache.curator:curator-recipes</include>
        <include>com.google.code.gson:gson</include>
        <include>com.google.guava:guava</include>
        <include>org.codehaus.jackson:jackson-core-asl</include>
        <include>org.codehaus.jackson:jackson-mapper-asl</include>
        <include>com.jamesmurty.utils:java-xmlbuilder</include>
        <include>net.java.dev.jets3t:jets3t</include>
        <include>jline:jline</include>
        <include>com.jcraft:jsch</include>
        <include>javax.servlet.jsp:jsp-api</include>
        <include>com.google.code.findbugs:jsr305</include>
        <include>io.netty:netty</include>
        <include>org.tukaani:xz</include>
      </includes>
      <excludes>
        <exclude>*:tests:*</exclude>
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib/pmr</outputDirectory>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>org.apache.hbase:hbase-client</include>
        <include>org.apache.hbase:hbase-common</include>
        <include>org.apache.hbase:hbase-examples</include>
        <include>org.apache.hbase:hbase-hadoop-compat</include>
        <include>org.apache.hbase:hbase-protocol</include>
        <include>org.apache.hbase:hbase-server</include>
        <include>org.apache.hbase:hbase-thrift</include>
        <include>com.yammer.metrics:metrics-core</include>
        <include>org.apache.zookeeper:zookeeper</include>
      </includes>
      <excludes>
        <exclude>*:tests:*</exclude>
      </excludes>
    </dependencySet>
  </dependencySets>
</assembly>
